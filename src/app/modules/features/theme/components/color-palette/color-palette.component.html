<mat-accordion>
  <mat-expansion-panel>
    <mat-expansion-panel-header>
      <mat-panel-title>
        {{ name }}
        @if (tooltip) {
          <app-help-tooltip class="ml-1" [tooltip]="tooltip"></app-help-tooltip>
        }
      </mat-panel-title>
      <mat-panel-description>
        @for (hueKey of paletteColors() | keyvalue; track hueKey.key) {
          @if (hueKey.value) {
            <div class="h-4 w-2" [ngStyle]="{ 'background-color': hueKey.value }"></div>
          }
        }
      </mat-panel-description>
    </mat-expansion-panel-header>
    <mat-checkbox [checked]="automaticShades()" (change)="updateAutomaticShades($event)" class="ml-5">
      Determine shades automatically
      <app-help-tooltip tooltip="Uncheck to specify each shade manually"></app-help-tooltip>
    </mat-checkbox>
    <div class="flex w-full flex-col">
      <!-- <span class="mb-2 text-xs italic text-black/50">
        Lighter = {{ lighterColor }}, Default = {{ defaultColor }}, Text = {{ textColor }}, Darker = {{ darkerColor }}
        <span class="ml-2 cursor-pointer font-medium underline" (click)="updateDefaultsHues()">Update</span>
      </span> -->
      <div
        cdkDropList
        cdkDropListSortingDisabled
        (cdkDropListDropped)="drop($event)"
        class="example-list w-full !cursor-default">
        @for (hueKey of paletteColors() | keyvalue; track hueKey.key) {
          <!-- (click)="updateColor(hueKey.name)" -->
          <!-- <div class="example-box !cursor-default" [style.background-color]="hueKey.value" [attr.data-hue]="hueKey.key">
            <span class="rounded-lg bg-white px-2 py-1">
              {{ hueKey.key }}
            </span>
            <div class="flex gap-2">
              @for (mark of hueKey.marks; track mark) {
                <mat-chip class="!cursor-move border-[1px] border-black/50 bg-slate-300" cdkDrag [attr.data-mark]="mark">
                  {{ mark }}
                </mat-chip>
              }
            </div>
          </div> -->
          <app-color-tile
            [color]="hueKey.value"
            (colorChange)="updateColor($event, hueKey.key)"
            [colorName]="hueKey.key"
            [marks]="getMarks(hueKey.key)"></app-color-tile>
        }
      </div>
      <!-- <div class="flex h-full flex-wrap items-center justify-start">
          @for (color of paletteColors() | keyvalue; track color.key) {
            <div class="flex flex-col items-center justify-center gap-2">
              <app-color-brick [color]="color.value" (colorChange)="updateColor($event, color.key)">
                <span class="text-sm">{{ color.key }}</span>
              </app-color-brick>
            </div>
          }
          <div
            (mouseenter)="toggleShowLabel(true)"
            (mouseleave)="toggleShowLabel(false)"
            class="relative ml-2 flex h-full min-h-8 w-28 items-center justify-start">
            <span
              (click)="setExpanded(false)"
              class="flex cursor-pointer items-center justify-center whitespace-nowrap text-xs transition-opacity duration-300"
              [ngClass]="{ 'opacity-0': !showLabel() }">
              Reduce palette
              <app-help-tooltip tooltip="Reduce to create a palette from your color automatically"></app-help-tooltip>
            </span>
            <mat-icon
              (click)="setExpanded(false)"
              class="absolute left-0 z-0 cursor-pointer transition-transform duration-300"
              [ngClass]="{
                'translate-x-20': hideHelpTooltips() && showLabel(),
                'translate-x-24': !hideHelpTooltips() && showLabel()
              }">
              chevron_left
            </mat-icon>
          </div>
        </div> -->
    </div>
  </mat-expansion-panel>
</mat-accordion>
